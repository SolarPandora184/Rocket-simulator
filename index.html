<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Rocket Builder & Simulator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
      background: #e0f7fa;
    }
    h1 {
      background: #00796b;
      color: white;
      margin: 0;
      padding: 1em;
    }
    #builder {
      margin-top: 20px;
    }
    svg {
      border: 2px solid #333;
      background: #fff;
    }
    .part {
      cursor: move;
    }
    .controls {
      margin: 20px auto;
      max-width: 600px;
      text-align: left;
    }
    .readouts {
      margin-top: 20px;
    }
    .credit {
      margin-top: 40px;
      font-size: 0.9em;
      color: #555;
    }
  </style>
</head>
<body>
  <h1>Rocket Builder & Simulator</h1>

  <div id="builder">
    <svg id="rocket-svg" width="300" height="500" viewBox="0 0 100 200">
      <!-- Rocket Body -->
      <rect id="body" class="part" x="45" y="80" width="10" height="60" fill="red" />
      <!-- Nose Cone -->
      <polygon id="nose" class="part" points="45,80 55,80 50,60" fill="red" />
      <!-- Left Fin -->
      <polygon id="left-fin" class="part" points="45,140 40,150 45,150" fill="red" />
      <!-- Right Fin -->
      <polygon id="right-fin" class="part" points="55,140 60,150 55,150" fill="red" />
    </svg>
  </div>

  <div class="controls">
    <button onclick="launch()">Launch</button>
  </div>

  <div class="readouts">
    <p id="altitude">Altitude: 0 m</p>
    <p id="velocity">Velocity: 0 m/s</p>
    <p id="acceleration">Acceleration: 0 m/s²</p>
  </div>

  <div class="credit">
    Built with help from ChatGPT by OpenAI
  </div>

  <script>
    const parts = document.querySelectorAll('.part');
    let selected = null, offsetX = 0, offsetY = 0;

    parts.forEach(part => {
      part.addEventListener('mousedown', e => {
        selected = e.target;
        const rect = selected.getBoundingClientRect();
        offsetX = e.clientX - rect.left;
        offsetY = e.clientY - rect.top;
      });
    });

    document.addEventListener('mousemove', e => {
      if (selected) {
        const svg = document.getElementById('rocket-svg');
        const pt = svg.createSVGPoint();
        pt.x = e.clientX;
        pt.y = e.clientY;
        const svgP = pt.matrixTransform(svg.getScreenCTM().inverse());
        if (selected.tagName === "rect") {
          selected.setAttribute("x", svgP.x - offsetX);
          selected.setAttribute("y", svgP.y - offsetY);
        } else if (selected.tagName === "polygon") {
          const points = selected.getAttribute("points").split(" ").map(p => {
            const [x, y] = p.split(",").map(Number);
            return [x + svgP.x - offsetX, y + svgP.y - offsetY].join(",");
          });
          selected.setAttribute("points", points.join(" "));
        }
      }
    });

    document.addEventListener('mouseup', () => selected = null);

    function launch() {
      let t = 0;
      let v = 0;
      let h = 0;
      const dt = 0.1;
      const g = 9.81;
      const thrust = 50; // N
      const mass = 1; // kg
      const burnTime = 2; // s

      const interval = setInterval(() => {
        const isBurning = t < burnTime;
        const force = isBurning ? thrust : 0;
        const a = (force - mass * g) / mass;
        v += a * dt;
        h += v * dt;
        t += dt;

        document.getElementById("altitude").textContent = `Altitude: ${h.toFixed(1)} m`;
        document.getElementById("velocity").textContent = `Velocity: ${v.toFixed(1)} m/s`;
        document.getElementById("acceleration").textContent = `Acceleration: ${a.toFixed(1)} m/s²`;

        if (h <= 0 && t > 0.5) clearInterval(interval);
      }, dt * 1000);
    }
  </script>
</body>
</html>
