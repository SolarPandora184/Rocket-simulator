<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Rocket Simulator</title>
  <style>
    body {
      margin: 0;
      background: #87CEEB;
      font-family: sans-serif;
    }
    canvas {
      display: block;
      margin: 0 auto;
      background: linear-gradient(#87CEEB, #ffffff);
    }
    #launchButton {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      padding: 10px 20px;
      font-size: 18px;
      cursor: pointer;
    }
    #countdown {
      position: absolute;
      top: 70px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 30px;
      font-weight: bold;
      color: red;
    }
  </style>
</head>
<body>
  <button id="launchButton">Launch</button>
  <div id="countdown"></div>
  <canvas id="simCanvas" width="400" height="600"></canvas>

  <script>
    const canvas = document.getElementById("simCanvas");
    const ctx = canvas.getContext("2d");

    let rocket = {
      x: canvas.width / 2 - 10,
      y: canvas.height - 60,
      width: 20,
      height: 60,
      velocity: 0,
      acceleration: 0,
      mass: 1.5, // kg
      thrust: 15, // N
      burnTime: 2, // seconds
      drag: 0.4,
      deployedParachute: false,
    };

    const g = 9.81; // gravity
    let time = 0;
    let dt = 0.02;
    let maxY = rocket.y;
    let flying = false;
    let countdown = 3;
    let parachuteImage = new Image();
    parachuteImage.src = "https://upload.wikimedia.org/wikipedia/commons/0/00/Parachute_icon.png";

    function drawRocket() {
      ctx.fillStyle = "gray";
      ctx.fillRect(rocket.x, rocket.y, rocket.width, rocket.height);
    }

    function drawParachute() {
      if (rocket.deployedParachute) {
        ctx.drawImage(parachuteImage, rocket.x - 15, rocket.y - 40, 50, 50);
      }
    }

    function updateRocket() {
      if (time < rocket.burnTime) {
        rocket.acceleration = rocket.thrust / rocket.mass - g;
      } else {
        rocket.acceleration = -g - rocket.drag * rocket.velocity;
        if (!rocket.deployedParachute && rocket.velocity < -1) {
          rocket.deployedParachute = true;
          rocket.drag = 1.8;
        }
      }

      rocket.velocity += rocket.acceleration * dt;
      rocket.y -= rocket.velocity;

      if (rocket.y > canvas.height - 60) {
        rocket.y = canvas.height - 60;
        rocket.velocity = 0;
        flying = false;
      }

      time += dt;
    }

    function drawScene() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Ground
      ctx.fillStyle = "green";
      ctx.fillRect(0, canvas.height - 20, canvas.width, 20);

      drawRocket();
      drawParachute();
    }

    function animate() {
      if (flying) {
        updateRocket();
        drawScene();
        requestAnimationFrame(animate);
      }
    }

    function startCountdown() {
      document.getElementById("countdown").textContent = countdown;
      let interval = setInterval(() => {
        countdown--;
        if (countdown === 0) {
          clearInterval(interval);
          document.getElementById("countdown").textContent = "";
          flying = true;
          animate();
        } else {
          document.getElementById("countdown").textContent = countdown;
        }
      }, 1000);
    }

    document.getElementById("launchButton").addEventListener("click", () => {
      if (!flying) {
        rocket.y = canvas.height - 60;
        rocket.velocity = 0;
        rocket.acceleration = 0;
        time = 0;
        rocket.deployedParachute = false;
        countdown = 3;
        startCountdown();
      }
    });

    drawScene();
  </script>
</body>
</html>
